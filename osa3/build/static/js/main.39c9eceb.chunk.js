(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{23:function(e,n,t){},41:function(e,n,t){"use strict";t.r(n);var c=t(0),o=t(2),a=t.n(o),r=t(17),u=t.n(r),i=(t(23),t(8)),s=t(3),l=t(5),d=t.n(l),j="/api/persons",h=function(){return d.a.get(j).then((function(e){return e.data}))},b=function(e){return d.a.post(j,e).then((function(e){return e.data}))},f=function(e){return d.a.delete("".concat(j,"/").concat(e)).then((function(e){return e.data}))},m=function(e){return d.a.put("".concat(j,"/").concat(e.id),e).then((function(e){return e.data}))},O=function(e){return Object(c.jsxs)("p",{children:["filter: ",Object(c.jsx)("input",{onChange:e.func})]})},p=function(e){return Object(c.jsxs)("form",{onSubmit:e.addperson,children:[Object(c.jsxs)("div",{children:["name: ",Object(c.jsx)("input",{value:e.newname,onChange:e.handlenotechange})]}),Object(c.jsxs)("div",{children:["phone: ",Object(c.jsx)("input",{value:e.newphone,onChange:e.handlephonechange})]}),Object(c.jsx)("div",{children:Object(c.jsx)("button",{type:"submit",children:"add"})})]})},x=function(e){return Object(c.jsx)("ul",{children:e.notes.map((function(n){return Object(c.jsxs)("div",{children:[n.name," ",n.number," ",Object(c.jsx)(g,{name:n.name,person:n,click:e.ondeleteclick})]},n.name)}))})},g=function(e){return Object(c.jsx)("button",{onClick:function(n){console.log(n.target.value),e.click(e.person)},children:"delete"})},v=function(e){var n=e.message,t=e.type;return null===n?null:"error"===t?Object(c.jsx)("div",{className:"error",children:n}):Object(c.jsx)("div",{className:"success",children:n})},w=function(){Object(o.useEffect)((function(){h().then((function(e){a(e)}))}),[]);var e=Object(o.useState)([{name:"",number:""}]),n=Object(s.a)(e,2),t=n[0],a=n[1],r=Object(o.useState)(""),u=Object(s.a)(r,2),l=u[0],d=u[1],j=Object(o.useState)(""),g=Object(s.a)(j,2),w=g[0],k=g[1],S=Object(o.useState)("true"),y=Object(s.a)(S,2),C=y[0],T=y[1],D=Object(o.useState)(""),E=Object(s.a)(D,2),J=E[0],N=E[1],B=Object(o.useState)(null),I=Object(s.a)(B,2),L=I[0],M=I[1],P=Object(o.useState)(null),q=Object(s.a)(P,2),z=q[0],A=q[1],F=C?t:t.filter((function(e){return e.name.toLowerCase().includes(J)}));return Object(c.jsxs)("div",{children:[Object(c.jsx)("h2",{children:"Phonebook"}),Object(c.jsx)(v,{message:L}),Object(c.jsx)(v,{message:z,type:"error"}),Object(c.jsx)(O,{func:function(e){T(!1),N(e.target.value)}}),Object(c.jsx)("h2",{children:"add a new"}),Object(c.jsx)(p,{addperson:function(e){e.preventDefault();var n={name:l,number:w,id:void 0};if(t.some((function(e){return e.name===n.name}))){var c=Object(i.a)(t),o=c.map((function(e){return e.name})).indexOf(n.name);window.confirm("".concat(n.name," is already added to phonebook, replace the old number with a new one?"))&&(n.id=c[o].id,m(n).then((function(e){-1!==o&&(c.splice(o,1),a(c.concat(e)),M("".concat(n.name,"'s phone changed to ").concat(n.number)),setTimeout((function(){M(null)}),5e3))})).catch((function(e){A("the note has already been deleted from the server")})).setTimeout((function(){A(null)}),5e3))}else b(n).then((function(e){a(t.concat(e)),console.log(e),M("".concat(n.name," added to phonebook")),setTimeout((function(){M(null)}),5e3)})).catch((function(e){console.log(e.response.data),console.log(e.response.data.error,"error text"),A(e.response.data.error),setTimeout((function(){A(null)}),5e3)}));d(""),k("")},newname:l,handlenotechange:function(e){console.log(e.target.value),d(e.target.value)},newphone:w,handlephonechange:function(e){console.log(e.target.value),k(e.target.value)}}),Object(c.jsx)("h2",{children:"numbers"}),Object(c.jsx)(x,{notes:F,ondeleteclick:function(e){if(window.confirm("Delete ".concat(e.name,"?"))){var n=Object(i.a)(t),c=n.map((function(e){return e.name})).indexOf(e.name);f(e.id).then((function(e){})),-1!==c&&(n.splice(c,1),a(n)),M("".concat(e.name," deleted from phonebook")),setTimeout((function(){M(null)}),5e3)}}})]})};u.a.render(Object(c.jsx)(a.a.StrictMode,{children:Object(c.jsx)(w,{})}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.39c9eceb.chunk.js.map