{"version":3,"sources":["services/persons.js","App.js","index.js"],"names":["baseUrl","axios","get","then","response","data","newObject","post","deleteObject","delete","updateObject","put","id","Filter","props","onChange","func","PersonForm","onSubmit","addperson","value","newname","handlenotechange","newphone","handlephonechange","type","Persons","notes","map","person","name","number","click","ondeleteclick","DeleteButton","onClick","e","console","log","target","Notification","message","className","App","useEffect","personService","initialPersons","setPersons","useState","persons","newName","setNewName","newPhone","setNewPhone","showAll","setShowAll","filteredValue","setFilter","sucessMessage","setSucessMessage","errorMessage","setErrorMessage","filterNotes","filter","toLowerCase","includes","event","preventDefault","nameObject","undefined","some","array","index","indexOf","window","confirm","returnedPerson","splice","concat","setTimeout","catch","error","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.39c9eceb.chunk.js","sourcesContent":["import axios from 'axios'\nconst baseUrl = '/api/persons'\n\nconst getAll = () => {\n    const request = axios.get(baseUrl)\n    return request.then(response => response.data)\n}\n\nconst create = newObject => {\n    const request = axios.post(baseUrl, newObject)\n    return request.then(response => response.data)\n}\n\nconst deletePerson = deleteObject => {\n    const request = axios.delete(`${baseUrl}/${deleteObject}`)\n    return request.then(response => response.data)\n}\n\nconst updateNumber = updateObject => {\n    const request = axios.put(`${baseUrl}/${updateObject.id}`, updateObject)\n    return request.then(response => response.data)\n}\n\nexport default { getAll, create, deletePerson, updateNumber}","import React, { useEffect, useState } from 'react'\nimport personService from './services/persons.js'\n\nconst Filter = (props) => {\n  return (\n  <p> \n  filter: <input onChange={props.func}></input>\n  </p>\n  )\n}\n\nconst PersonForm = (props) => {\n  return(\n  <form onSubmit={props.addperson}>\n        <div>\n          name: <input value={props.newname}\n          onChange={props.handlenotechange}/>\n        </div>\n        <div>\n          phone: <input value={props.newphone}\n          onChange={props.handlephonechange}/>\n        </div>\n        <div>\n          <button type=\"submit\">add</button>\n        </div>\n      </form>\n  )\n}\n\nconst Persons = (props) => {\n  return(\n    <ul>{props.notes.map(person => \n      <div key={person.name} >{person.name} {person.number} <DeleteButton name={person.name} person={person} click={props.ondeleteclick}/></div>\n    )}\n    </ul>\n  )\n}\n\nconst DeleteButton = (props) => {\n  const handleClick = (e) => {\n    console.log(e.target.value)\n    props.click(props.person)\n  }\n  return(\n    <button onClick={handleClick}>delete</button>\n  )\n}\n\nconst Notification = ({ message, type }) => {\n  if (message === null) {\n    return null\n  }\n  if (type === 'error'){\n    return (\n      <div className=\"error\">\n        {message}\n      </div>\n    )\n  }\n  return (\n    <div className=\"success\">\n      {message}\n    </div>\n  )\n}\n\nconst App = () => {\n\n  useEffect(() => {\n    personService\n      .getAll()\n      .then(initialPersons => {\n        setPersons(initialPersons)\n      })\n\n  }, [])\n\n  const [ persons, setPersons] = useState([\n    { name: '', number: '' }\n  ])\n  const [ newName, setNewName ] = useState('')\n  const [ newPhone, setNewPhone ] = useState('')\n  const [ showAll, setShowAll ] = useState('true')\n  const [ filteredValue, setFilter ] = useState('')\n  const [ sucessMessage, setSucessMessage] = useState(null)\n  const [ errorMessage, setErrorMessage] = useState(null)\n\n  const addPerson = (event) => {\n    event.preventDefault()\n    const nameObject = {\n      name: newName,\n      number: newPhone,\n      id: undefined\n    }\n\n\n  if (persons.some(person => person.name === nameObject.name)){\n    var array = [...persons]\n    var index = array.map(function(e) { return e.name; }).indexOf(nameObject.name);\n    if (window.confirm(`${nameObject.name} is already added to phonebook, replace the old number with a new one?`)){\n      nameObject.id = array[index].id\n      personService\n        .updateNumber(nameObject)\n        .then(returnedPerson => {\n\n          if (index !== -1){\n            array.splice(index, 1)\n            setPersons(array.concat(returnedPerson))\n            \n            setSucessMessage(`${nameObject.name}'s phone changed to ${nameObject.number}`)\n            setTimeout(() => {\n              setSucessMessage(null)\n            }, 5000)\n          }\n          \n        })\n        .catch(error => {\n          setErrorMessage(`the note has already been deleted from the server`)\n        })\n        .setTimeout(() => {\n          setErrorMessage(null)\n        }, 5000)\n    }\n\n  }\n  else{\n    \n    personService    \n      .create(nameObject)    \n      .then(returnedPerson => {    \n        setPersons(persons.concat(returnedPerson))  \n        console.log(returnedPerson) \n        setSucessMessage(`${nameObject.name} added to phonebook`)\n        setTimeout(() => {\n          setSucessMessage(null)\n        }, 5000)\n      })\n      .catch(error => {\n        console.log(error.response.data)\n        console.log(error.response.data.error, \"error text\")\n        setErrorMessage(error.response.data.error)\n        setTimeout(() => {\n          setErrorMessage(null)\n        }, 5000)\n      })\n      \n  }\n  setNewName('')\n  setNewPhone('')\n  }\n\n  const removePerson = (props) => {\n    if (window.confirm(`Delete ${props.name}?`)){\n      var array = [...persons]\n      var index = array.map(function(e) { return e.name; }).indexOf(props.name);\n\n      personService\n        .deletePerson(props.id)\n        .then(response => {\n\n        })\n      \n      if (index !== -1){\n        array.splice(index, 1)\n        setPersons(array)\n      }\n      setSucessMessage(`${props.name} deleted from phonebook`)\n      setTimeout(() => {\n        setSucessMessage(null)\n      }, 5000)\n    }\n\n  }\n\n  const filterNotes = showAll ? persons : persons.filter(person => person.name.toLowerCase().includes(filteredValue))\n\n  const handleNoteChange = (event) => {\n    console.log(event.target.value)\n    setNewName(event.target.value)\n  }\n  const handlePhoneChange = (event) => {\n    console.log(event.target.value)\n    setNewPhone(event.target.value)\n  }\n\n  const handleFilter = (event) => {\n    setShowAll(false)\n    setFilter(event.target.value)\n  \n  }\n\n  return (\n    <div> \n      <h2>Phonebook</h2>\n\n      <Notification message={sucessMessage}/>\n      <Notification message={errorMessage} type='error'/>\n\n      <Filter func={handleFilter} />\n\n      <h2>add a new</h2>\n\n      <PersonForm addperson={addPerson} newname={newName} handlenotechange={handleNoteChange}\n        newphone={newPhone} handlephonechange={handlePhoneChange} />\n\n      <h2>numbers</h2>\n\n      <Persons notes={filterNotes} ondeleteclick={removePerson}/>\n    </div>\n  )\n\n}\n\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}